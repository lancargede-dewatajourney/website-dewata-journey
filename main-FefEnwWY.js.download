const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/run-user-code-D6ecMoD5.js","assets/apply-csp-BihWoh4i.js","assets/build-user-code-BluAApu-.js","assets/get-html-D9pLuxCy.js","assets/run-widget-code-Mj8mQyDh.js","assets/adapter-BXANqUJ5.js","assets/validate-react-OtPi28EF.js","assets/transpile-BU4qzYDm.js","assets/parse-transpile-error-BBjGX3mP.js"])))=>i.map(i=>d[i]);
var Zn=Object.defineProperty;var qe=t=>{throw TypeError(t)};var Jn=(t,e,n)=>e in t?Zn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e,n)=>Jn(t,typeof e!="symbol"?e+"":e,n),Ae=(t,e,n)=>e.has(t)||qe("Cannot "+n);var a=(t,e,n)=>(Ae(t,e,"read from private field"),n?n.call(t):e.get(t)),v=(t,e,n)=>e.has(t)?qe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),E=(t,e,n,r)=>(Ae(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),m=(t,e,n)=>(Ae(t,e,"access private method"),n);var we=(t,e,n,r)=>({set _(o){E(t,e,o,n)},get _(){return a(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Qn="modulepreload",tr=function(t){return"/"+t},Ke={},Tt=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=tr(c),c in Ke)return;Ke[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Qn,h||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),h)return new Promise((f,w)=>{d.addEventListener("load",f),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},wn="root",st=()=>document.getElementById(wn),er=()=>{const t=st();t==null||t.remove()},nr=t=>{const e=document.createElement("iframe");return e.sandbox="allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms",e.id=wn,t!=null&&t.length&&e.setAttribute("allow",rr(t)),e.allowFullscreen=!!(t!=null&&t.includes("fullscreen")),document.body.appendChild(e),e},rr=t=>t.concat().sort().map(e=>`${e} *`).join("; ");var yt=(t=>(t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(yt||{}),En=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(En||{});const as=t=>{if(typeof t!="object"||t===null)return null;const e=t;if(!Array.isArray(e.content))return null;const n=c=>{if(Array.isArray(c))return c.map(h=>n(h));if(typeof c=="object"&&c!==null){const h={};for(const[u,d]of Object.entries(c))d!==null&&(h[u]=n(d));return h}return c},r=n(e.content),o=e.structuredContent==null?void 0:n(e.structuredContent),s=typeof e.isError=="boolean"?e.isError:void 0,i=e._meta==null?void 0:n(e._meta),l=i!=null&&typeof i=="object"&&!Array.isArray(i)?i:void 0;return{content:r,...o!==void 0?{structuredContent:o}:{},...s!==void 0?{isError:s}:{},...l!==void 0?{_meta:l}:{}}},or=new Set(["sendInstrument","notifySecurityPolicyViolation","notifyEnvironmentError","notifyIntrinsicHeight","notifyBackgroundColor","notifyNavigation","notifyEscapeKey","drawBoundingBoxes","getDownloadURL","openPromptInput","openConversationOverlay","openPulseOverlay","openPulseShare","triggerHaptic","updateWidgetState","callMcp"]),Ze="webplus:set_globals";class sr extends CustomEvent{constructor(n){super(Ze,{detail:{globals:n}});T(this,"type",Ze)}}const Je="openai:set_globals";class ir extends CustomEvent{constructor(n){super(Je,{detail:{globals:n}});T(this,"type",Je)}}const ar=1500;let ce=null;const Qe=()=>{var e;const t=(e=st())==null?void 0:e.contentWindow;return!ce||!t||!(ce instanceof t.HTMLElement)?null:ce},tn=(t,e,n)=>{var r;try{const o=new URL(n,e.href);if(o.hostname!==e.hostname||o.protocol!==e.protocol)return(r=t.openExternal)==null||r.call(t,{href:o.href}),!0}catch{return}},cr=({doc:t,isFirstParty:e})=>{const n=t.contentWindow;if(!n)return;const r=Ue({isFirstParty:e,includePrivate:e});let o;const s=u=>{var R,_;if(!u.isTrusted||((R=r.sendInstrument)==null||R.call(r,{type:"interaction",label:"click"}),!(u instanceof n.MouseEvent)))return;const d=u.target;if(!(d instanceof n.HTMLElement))return;const f=(_=d.closest("a"))==null?void 0:_.getAttribute("href");if(!f)return;const{location:w}=n;tn(r,w,f)&&u.preventDefault()},i=()=>{var d;const u=n.getSelection();!u||u.toString().trim().length===0||(d=r.sendInstrument)==null||d.call(r,{type:"interaction",label:"copy"})},l=()=>{var u;o||(o=n.setTimeout(()=>{o=void 0},ar),(u=r.sendInstrument)==null||u.call(r,{type:"interaction",label:"scroll"}))},c=u=>{var d;ce=u.target,u.key==="Escape"&&((d=r.notifyEscapeKey)==null||d.call(r))},h=u=>{ce=u.target};n.addEventListener("pointerdown",h,{passive:!0}),n.addEventListener("keydown",c,{passive:!0}),n.addEventListener("click",s,{capture:!0}),n.addEventListener("copy",i,{passive:!0}),n.addEventListener("scroll",l,{passive:!0}),n.document.addEventListener("scroll",l,{capture:!0,passive:!0}),n.open=u=>{if(!u)return null;const{location:d}=n;return tn(r,d,u),null}},re=new URLSearchParams(window.location.search);re.get("isStorybook");const lr=re.get("sessionId")??"",Zt=re.get("app")??"",_n=re.get("deviceType")==="mobile",ke=_n&&Zt==="skybridge",Sn=!_n&&Zt==="skybridge",en=re.get("locale")??"",ur=re.get("unsafeSkipTargetOriginCheck")==="true",Tn="mobileSkybridge",On="desktopSkybridge";ke?document.documentElement.classList.add(Tn):Sn&&document.documentElement.classList.add(On);let ze=null;const hr=new Set(["requestDisplayMode","sendFollowUpMessage","openExternal","requestPrompt","requestTargetedReply","triggerHaptic"]),dr=t=>{ze=t},fr=()=>"userActivation"in window.navigator?window.navigator.userActivation.isActive:!0,Y=()=>Ue({isFirstParty:!0,includePrivate:!0}),nn=(t,e,n)=>{var r,o,s,i,l;if(t==="requestDropdown"){const c=(r=Qe())==null?void 0:r.getBoundingClientRect();return(o=e.requestDropdown)==null?void 0:o.call(e,{clientX:(c==null?void 0:c.left)??0,clientY:(c==null?void 0:c.top)??0,...n[0]})}if(!ke&&t==="requestPrompt"){const c=(s=Qe())==null?void 0:s.getBoundingClientRect();return(i=e.openPromptInput)==null?void 0:i.call(e,{...n[0],clientX:(c==null?void 0:c.left)??0,clientY:(c==null?void 0:c.top)??0})}return(l=e[t])==null?void 0:l.call(e,...n)},Ue=({isFirstParty:t,includePrivate:e=!1})=>{if(!ze)throw new Error("Host API not published");return new Proxy(ze,{get(n,r){if(!(r in n))return console.warn(`Host API property \`${String(r)}\` not found`);const o=r;if(!(!t&&!e&&or.has(o)))return!t&&hr.has(o)?(...s)=>fr()?nn(o,n,s):console.warn(`Method \`${String(o)}\` called without synchronous user event`):typeof n[o]=="function"?(...s)=>nn(o,n,s):n[o]}})};function pr(t,e="<unknown>"){if(t==null)throw new Error(`${e}: unexpected nullish value: ${JSON.stringify(t)}`);return t}var M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fe={},ge={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.cast=yr;ye.get=mr;ye.set=br;const gr=2**32;function yr(t){return t<0?t+gr:t}function mr(t,e){return t>>e&255}function br(t,e,n){return t^(t^n<<e)&255<<e}(function(t){var e=M&&M.__createBinding||(Object.create?function(p,y,I,C){C===void 0&&(C=I);var S=Object.getOwnPropertyDescriptor(y,I);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[I]}}),Object.defineProperty(p,C,S)}:function(p,y,I,C){C===void 0&&(C=I),p[C]=y[I]}),n=M&&M.__setModuleDefault||(Object.create?function(p,y){Object.defineProperty(p,"default",{enumerable:!0,value:y})}:function(p,y){p.default=y}),r=M&&M.__importStar||function(p){if(p&&p.__esModule)return p;var y={};if(p!=null)for(var I in p)I!=="default"&&Object.prototype.hasOwnProperty.call(p,I)&&e(y,p,I);return n(y,p),y};Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_A=t.OFFSET_B=t.OFFSET_G=t.OFFSET_R=void 0,t.newColor=c,t.from=h,t.toNumber=u,t.getRed=d,t.getGreen=f,t.getBlue=w,t.getAlpha=R,t.setRed=_,t.setGreen=O,t.setBlue=b,t.setAlpha=L;const o=r(ye),{cast:s,get:i,set:l}=o;t.OFFSET_R=24,t.OFFSET_G=16,t.OFFSET_B=8,t.OFFSET_A=0;function c(p,y,I,C){return(p<<t.OFFSET_R)+(y<<t.OFFSET_G)+(I<<t.OFFSET_B)+(C<<t.OFFSET_A)}function h(p){return c(i(p,t.OFFSET_R),i(p,t.OFFSET_G),i(p,t.OFFSET_B),i(p,t.OFFSET_A))}function u(p){return s(p)}function d(p){return i(p,t.OFFSET_R)}function f(p){return i(p,t.OFFSET_G)}function w(p){return i(p,t.OFFSET_B)}function R(p){return i(p,t.OFFSET_A)}function _(p,y){return l(p,t.OFFSET_R,y)}function O(p,y){return l(p,t.OFFSET_G,y)}function b(p,y){return l(p,t.OFFSET_B,y)}function L(p,y){return l(p,t.OFFSET_A,y)}})(ge);var me={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.labToXyzd50=Lr;D.xyzd50ToLab=Ir;D.oklabToXyzd65=vn;D.xyzd65ToOklab=Ln;D.lchToLab=In;D.labToLch=Pn;D.displayP3ToXyzd50=Pr;D.xyzd50ToDisplayP3=Mr;D.proPhotoToXyzd50=zr;D.xyzd50ToProPhoto=Fr;D.adobeRGBToXyzd50=Dr;D.xyzd50ToAdobeRGB=xr;D.rec2020ToXyzd50=Br;D.xyzd50ToRec2020=Nr;D.xyzd50ToD65=Mn;D.xyzd65ToD50=zn;D.xyzd65TosRGBLinear=Gr;D.xyzd50TosRGBLinear=Wr;D.srgbLinearToXyzd50=jr;D.srgbToXyzd50=kr;D.xyzd50ToSrgb=Ur;D.oklchToXyzd50=Hr;D.xyzd50ToOklch=$r;const Rn=.9642,An=1,Cn=.8251;function U(t,e){const n=[0,0,0];for(let r=0;r<3;++r)n[r]=t[r][0]*e[0]+t[r][1]*e[1]+t[r][2]*e[2];return n}class At{constructor(e,n,r=0,o=0,s=0,i=0,l=0){T(this,"g");T(this,"a");T(this,"b");T(this,"c");T(this,"d");T(this,"e");T(this,"f");this.g=e,this.a=n,this.b=r,this.c=o,this.d=s,this.e=i,this.f=l}eval(e){const n=e<0?-1:1,r=e*n;return r<this.d?n*(this.c*r+this.f):n*(Math.pow(this.a*r+this.b,this.g)+this.e)}}const wt={sRGB:new At(2.4,1/1.055,.055/1.055,1/12.92,.04045,0,0),sRGB_INVERSE:new At(.416667,1.13728,-0,12.92,.0031308,-.0549698,-0),proPhotoRGB:new At(1.8,1),proPhotoRGB_INVERSE:new At(.555556,1,-0,0,0,0,0),k2Dot2:new At(2.2,1),k2Dot2_INVERSE:new At(.454545,1),rec2020:new At(2.22222,.909672,.0903276,.222222,.0812429,0,0),rec2020_INVERSE:new At(.45,1.23439,-0,4.5,.018054,-.0993195,-0)},Et={sRGB:[[.436065674,.385147095,.143066406],[.222488403,.716873169,.06060791],[.013916016,.097076416,.714096069]],sRGB_INVERSE:[[3.134112151374599,-1.6173924597114966,-.4906334036481285],[-.9787872938826594,1.9162795854799963,.0334547139520088],[.07198304248352326,-.2289858493321844,1.4053851325241447]],displayP3:[[.515102,.291965,.157153],[.241182,.692236,.0665819],[-.00104941,.0418818,.784378]],displayP3_INVERSE:[[2.404045155982687,-.9898986932663839,-.3976317191366333],[-.8422283799266768,1.7988505115115485,.016048170293157416],[.04818705979712955,-.09737385156228891,1.2735066448052303]],adobeRGB:[[.60974,.20528,.14919],[.31111,.62567,.06322],[.01947,.06087,.74457]],adobeRGB_INVERSE:[[1.9625385510109137,-.6106892546501431,-.3413827467482388],[-.9787580455521,1.9161624707082339,.03341676594241408],[.028696263137883395,-.1406807819331586,1.349252109991369]],rec2020:[[.673459,.165661,.1251],[.279033,.675338,.0456288],[-.00193139,.0299794,.797162]],rec2020_INVERSE:[[1.647275201661012,-.3936024771460771,-.23598028884792507],[-.6826176165196962,1.647617775014935,.01281626807852422],[.029662725298529837,-.06291668721366285,1.2533964313435522]],xyz:[[1,0,0],[0,1,0],[0,0,1]]};function rn(t){return t*(Math.PI/180)}function wr(t){return t*(180/Math.PI)}function _t(t,e,n,r){return[t.eval(e),t.eval(n),t.eval(r)]}const Er=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],_r=[[.2104542553,.7936177849999999,-.0040720468],[1.9779984951000003,-2.4285922049999997,.4505937099000001],[.025904037099999982,.7827717662,-.8086757660000001]],Sr=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],Tr=[[1.226879873374156,-.5578149965554814,.2813910501772159],[-.040575762624313734,1.1122868293970596,-.07171106666151703],[-.07637294974672144,-.4214933239627915,1.586924024427242]],Or=[[.7976700747153241,.13519395152800417,.03135596341127167],[.28803902352472205,.7118744007923554,8661179538844252e-20],[2739876695467402e-22,-14405226518969991e-22,.825211112593861]],Rr=[[1.3459533710138858,-.25561367037652133,-.051116041522131374],[-.544600415668951,1.5081687311475767,.020535163968720935],[-13975622054109725e-22,2717590904589903e-21,1.2118111696814942]],Ar=[[1.0478573189120088,.022907374491829943,-.050162247377152525],[.029570500050499514,.9904755577034089,-.017061518194840468],[-.00924047197558879,.015052921526981566,.7519708530777581]],Cr=[[.9555366447632887,-.02306009252137888,.06321844147263304],[-.028315378228764922,1.009951351591575,.021026001591792402],[.012308773293784308,-.02050053471777469,1.3301947294775631]],vr=[[3.2408089365140573,-1.5375788839307314,-.4985609572551541],[-.9692732213205414,1.876110235238969,.041560501141251774],[.05567030990267439,-.2040007921971802,1.0571046720577026]];function Lr(t,e,n){let r=(t+16)/116,o=r+e/500,s=r-n/200;function i(l){return l<=.20689655172413793?108/841*(l-16/116):l*l*l}return o=i(o)*Rn,r=i(r)*An,s=i(s)*Cn,[o,r,s]}function Ir(t,e,n){function r(l){return l<=.008856451679035631?841/108*l+16/116:Math.pow(l,1/3)}t=r(t/Rn),e=r(e/An),n=r(n/Cn);const o=116*e-16,s=500*(t-e),i=200*(e-n);return[o,s,i]}function vn(t,e,n){const o=U(Er,[t,e,n]);return o[0]=o[0]*o[0]*o[0],o[1]=o[1]*o[1]*o[1],o[2]=o[2]*o[2]*o[2],U(Tr,o)}function Ln(t,e,n){const o=U(Sr,[t,e,n]);o[0]=Math.pow(o[0],1/3),o[1]=Math.pow(o[1],1/3),o[2]=Math.pow(o[2],1/3);const s=U(_r,o);return[s[0],s[1],s[2]]}function In(t,e,n){return n===void 0?[t,0,0]:[t,e*Math.cos(rn(n)),e*Math.sin(rn(n))]}function Pn(t,e,n){return[t,Math.sqrt(e*e+n*n),wr(Math.atan2(n,e))]}function Pr(t,e,n){const[r,o,s]=_t(wt.sRGB,t,e,n),i=[r,o,s];return U(Et.displayP3,i)}function Mr(t,e,n){const r=[t,e,n],o=U(Et.displayP3_INVERSE,r);return _t(wt.sRGB_INVERSE,o[0],o[1],o[2])}function zr(t,e,n){const[r,o,s]=_t(wt.proPhotoRGB,t,e,n);return U(Or,[r,o,s])}function Fr(t,e,n){const o=U(Rr,[t,e,n]);return _t(wt.proPhotoRGB_INVERSE,o[0],o[1],o[2])}function Dr(t,e,n){const[r,o,s]=_t(wt.k2Dot2,t,e,n),i=[r,o,s];return U(Et.adobeRGB,i)}function xr(t,e,n){const r=[t,e,n],o=U(Et.adobeRGB_INVERSE,r);return _t(wt.k2Dot2_INVERSE,o[0],o[1],o[2])}function Br(t,e,n){const[r,o,s]=_t(wt.rec2020,t,e,n),i=[r,o,s];return U(Et.rec2020,i)}function Nr(t,e,n){const r=[t,e,n],o=U(Et.rec2020_INVERSE,r);return _t(wt.rec2020_INVERSE,o[0],o[1],o[2])}function Mn(t,e,n){return U(Cr,[t,e,n])}function zn(t,e,n){return U(Ar,[t,e,n])}function Gr(t,e,n){return U(vr,[t,e,n])}function Wr(t,e,n){const r=[t,e,n];return U(Et.sRGB_INVERSE,r)}function jr(t,e,n){const r=[t,e,n];return U(Et.sRGB,r)}function kr(t,e,n){const[r,o,s]=_t(wt.sRGB,t,e,n),i=[r,o,s];return U(Et.sRGB,i)}function Ur(t,e,n){const r=[t,e,n],o=U(Et.sRGB_INVERSE,r);return _t(wt.sRGB_INVERSE,o[0],o[1],o[2])}function Hr(t,e,n){const[r,o,s]=In(t,e,n),[i,l,c]=vn(r,o,s);return zn(i,l,c)}function $r(t,e,n){const[r,o,s]=Mn(t,e,n),[i,l,c]=Ln(r,o,s);return Pn(i,l,c)}var Vr=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Xr=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Yr=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Vr(e,t,n);return Xr(e,t),e};Object.defineProperty(me,"__esModule",{value:!0});me.parse=to;me.parseHex=Fn;me.parseColor=Dn;const le=ge,x=Yr(D),qr=35,Re=37,Kr=103,be=110,Zr=100,Jr=101,Qr=(()=>{const t="(\\w+)",e="[\\s,\\/]",n="([^\\s,\\/]+)",r=`(?:${e}+${n})`;return new RegExp(`${t}\\(
      ${e}*
      ${n}
      ${r}
      ${r}
      ${r}?
      ${r}?
      ${e}*
    \\)`.replace(/\s/g,""))})();function to(t){return t.charCodeAt(0)===qr?Fn(t):Dn(t)}function Fn(t){let e=0,n=0,r=0,o=255;switch(t.length){case 4:{e=(W(t.charCodeAt(1))<<4)+W(t.charCodeAt(1)),n=(W(t.charCodeAt(2))<<4)+W(t.charCodeAt(2)),r=(W(t.charCodeAt(3))<<4)+W(t.charCodeAt(3));break}case 7:{e=(W(t.charCodeAt(1))<<4)+W(t.charCodeAt(2)),n=(W(t.charCodeAt(3))<<4)+W(t.charCodeAt(4)),r=(W(t.charCodeAt(5))<<4)+W(t.charCodeAt(6));break}case 9:{e=(W(t.charCodeAt(1))<<4)+W(t.charCodeAt(2)),n=(W(t.charCodeAt(3))<<4)+W(t.charCodeAt(4)),r=(W(t.charCodeAt(5))<<4)+W(t.charCodeAt(6)),o=(W(t.charCodeAt(7))<<4)+W(t.charCodeAt(8));break}}return(0,le.newColor)(e,n,r,o)}function W(t){return(t&15)+9*(t>>6)}function Dn(t){const e=Qr.exec(t);if(e===null)throw new Error(`Color.parse(): invalid CSS color: "${t}"`);const n=e[1],r=e[2],o=e[3],s=e[4],i=e[5],l=e[6];switch(n){case"rgb":case"rgba":{const c=Ce(r),h=Ce(o),u=Ce(s),d=i?Ct(i):255;return(0,le.newColor)(c,h,u,d)}case"hsl":case"hsla":{const c=ve(r),h=Ee(o),u=Ee(s),d=i?Ct(i):255;let f,w,R;if(h===0)f=w=R=Math.round(u*255);else{const _=u<.5?u*(1+h):u+h-u*h,O=2*u-_;f=Math.round(qt(O,_,c+1/3)*255),w=Math.round(qt(O,_,c)*255),R=Math.round(qt(O,_,c-1/3)*255)}return(0,le.newColor)(f,w,R,d)}case"hwb":{const c=ve(r),h=Ee(o),u=Ee(s),d=i?Ct(i):255,f=1,w=.5,R=w+f-w*f,_=2*w-R;let O=Math.round(qt(_,R,c+1/3)*255),b=Math.round(qt(_,R,c)*255),L=Math.round(qt(_,R,c-1/3)*255);return O=Le(O,h,u),b=Le(b,h,u),L=Le(L,h,u),(0,le.newColor)(O,b,L,d)}case"lab":{const c=vt(r,100),h=vt(o,125),u=vt(s,125),d=i?Ct(i):255;return rt(d,x.xyzd50ToSrgb(...x.labToXyzd50(c,h,u)))}case"lch":{const c=vt(r,100),h=vt(o,150),u=ve(s)*360,d=i?Ct(i):255;return rt(d,x.xyzd50ToSrgb(...x.labToXyzd50(...x.lchToLab(c,h,u))))}case"oklab":{const c=vt(r,1),h=vt(o,.4),u=vt(s,.4),d=i?Ct(i):255;return rt(d,x.xyzd50ToSrgb(...x.xyzd65ToD50(...x.oklabToXyzd65(c,h,u))))}case"oklch":{const c=Yt(r),h=Yt(o),u=Yt(s),d=i?Ct(i):255;return rt(d,x.xyzd50ToSrgb(...x.oklchToXyzd50(c,h,u)))}case"color":{const c=r,h=Yt(o),u=Yt(s),d=Yt(i),f=l?Ct(l):255;switch(c){case"srgb":return rt(f,[h,u,d]);case"srgb-linear":return rt(f,x.xyzd50ToSrgb(...x.srgbLinearToXyzd50(h,u,d)));case"display-p3":return rt(f,x.xyzd50ToSrgb(...x.displayP3ToXyzd50(h,u,d)));case"a98-rgb":return rt(f,x.xyzd50ToSrgb(...x.adobeRGBToXyzd50(h,u,d)));case"prophoto-rgb":return rt(f,x.xyzd50ToSrgb(...x.proPhotoToXyzd50(h,u,d)));case"rec2020":return rt(f,x.xyzd50ToSrgb(...x.rec2020ToXyzd50(h,u,d)));case"xyz":case"xyz-d65":return rt(f,x.xyzd50ToSrgb(...x.xyzd65ToD50(h,u,d)));case"xyz-d50":return rt(f,x.xyzd50ToSrgb(h,u,d))}}}throw new Error(`Color.parse(): invalid CSS color: "${t}"`)}function Ce(t){return t.charCodeAt(t.length-1)===Re?Math.round(parseFloat(t)/100*255):Math.round(parseFloat(t))}function Ct(t){return Math.round(eo(t)*255)}function eo(t){return t.charCodeAt(0)===be?0:t.charCodeAt(t.length-1)===Re?parseFloat(t)/100:parseFloat(t)}function ve(t){let e=1;switch(t.charCodeAt(t.length-1)){case Jr:return 0;case Zr:{t.charCodeAt(Math.max(0,t.length-4))===Kr?e=400:e=2*Math.PI;break}case be:{e=1;break}default:e=360}return parseFloat(t)/e}function Ee(t){return t.charCodeAt(0)===be?0:parseFloat(t)/100}function Yt(t){return t.charCodeAt(0)===be?0:t.charCodeAt(t.length-1)===Re?parseFloat(t)/100:parseFloat(t)}function vt(t,e){return t.charCodeAt(0)===be?0:t.charCodeAt(t.length-1)===Re?parseFloat(t)/100*e:parseFloat(t)}function qt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Le(t,e,n){let r=t/255;return r*=1-e-n,r+=e,Math.round(r*255)}function Ie(t){return Math.max(0,Math.min(255,t))}function rt(t,e){const n=Ie(Math.round(e[0]*255)),r=Ie(Math.round(e[1]*255)),o=Ie(Math.round(e[2]*255));return(0,le.newColor)(n,r,o,t)}var it={},no=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ro=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oo=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&no(e,t,n);return ro(e,t),e};Object.defineProperty(it,"__esModule",{value:!0});it.format=void 0;it.formatHEXA=xn;it.formatHEX=io;it.formatRGBA=ao;it.toRGBA=co;it.formatHSLA=lo;it.toHSLA=uo;it.formatHWBA=ho;it.toHWBA=fo;const so=oo(ge),{getRed:Dt,getGreen:xt,getBlue:Bt,getAlpha:Vt}=so,G=[0,0,0],kt=Array.from({length:256}).map((t,e)=>e.toString(16).padStart(2,"0"));it.format=xn;function xn(t){return"#"+kt[Dt(t)]+kt[xt(t)]+kt[Bt(t)]+kt[Vt(t)]}function io(t){return"#"+kt[Dt(t)]+kt[xt(t)]+kt[Bt(t)]}function ao(t){return`rgba(${Dt(t)} ${xt(t)} ${Bt(t)} / ${Vt(t)/255})`}function co(t){return{r:Dt(t),g:xt(t),b:Bt(t),a:Vt(t)}}function lo(t){Bn(Dt(t),xt(t),Bt(t));const e=G[0],n=G[1],r=G[2],o=Vt(t)/255;return`hsla(${e} ${n}% ${r}% / ${o})`}function uo(t){Bn(Dt(t),xt(t),Bt(t));const e=G[0],n=G[1],r=G[2],o=Vt(t)/255;return{h:e,s:n,l:r,a:o}}function ho(t){Nn(Dt(t),xt(t),Bt(t));const e=G[0],n=G[1],r=G[2],o=Vt(t)/255;return`hsla(${e} ${n}% ${r}% / ${o})`}function fo(t){Nn(Dt(t),xt(t),Bt(t));const e=G[0],n=G[1],r=G[2],o=Vt(t)/255;return{h:e,w:n,b:r,a:o}}function Bn(t,e,n){t/=255,e/=255,n/=255;const r=Math.max(t,e,n),o=r-Math.min(t,e,n),s=o?r===t?(e-n)/o:r===e?2+(n-t)/o:4+(t-e)/o:0;G[0]=60*s<0?60*s+360:60*s,G[1]=100*(o?r<=.5?o/(2*r-o):o/(2-(2*r-o)):0),G[2]=100*(2*r-o)/2}function Nn(t,e,n){t/=255,e/=255,n/=255;const r=Math.min(t,e,n),o=Math.max(t,e,n),s=1-o;if(o===r){G[0]=0,G[1]=r,G[2]=s;return}let i=t===r?e-n:e===r?n-t:t-e,l=t===r?3:e===r?5:1;G[0]=(l-i/(o-r))/6,G[1]=r,G[2]=s}var Xt={},po=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),go=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yo=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&po(e,t,n);return go(e,t),e};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.alpha=wo;Xt.darken=Eo;Xt.lighten=_o;Xt.blend=So;Xt.getLuminance=To;const mo=yo(ge),{getRed:ue,getGreen:he,getBlue:de,getAlpha:Gn,setAlpha:bo,newColor:He}=mo;function wo(t,e){return bo(t,Math.round(e*255))}function Eo(t,e){const n=ue(t),r=he(t),o=de(t),s=Gn(t),i=1-e;return He(n*i,r*i,o*i,s)}function _o(t,e){const n=ue(t),r=he(t),o=de(t),s=Gn(t);return He(n+(255-n)*e,r+(255-r)*e,o+(255-o)*e,s)}function So(t,e,n,r=1){const o=(c,h)=>Math.round((c**(1/r)*(1-n)+h**(1/r)*n)**r),s=o(ue(t),ue(e)),i=o(he(t),he(e)),l=o(de(t),de(e));return He(s,i,l,255)}function To(t){const e=ue(t)/255,n=he(t)/255,r=de(t)/255,o=c=>c<=.03928?c/12.92:((c+.055)/1.055)**2.4,s=o(e),i=o(n),l=o(r);return Math.round((.2126*s+.7152*i+.0722*l)*1e3)/1e3}(function(t){var e=M&&M.__createBinding||(Object.create?function(r,o,s,i){i===void 0&&(i=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(r,i,l)}:function(r,o,s,i){i===void 0&&(i=s),r[i]=o[s]}),n=M&&M.__exportStar||function(r,o){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(ge,t),n(me,t),n(it,t),n(Xt,t)})(Fe);function Lt(t,e=document.documentElement){var o;if((o=window.CSS)!=null&&o.number)return CSSNumericValue.parse(t).to("px").value;const n=document.createElement("div");n.style.all="initial",n.style.position="absolute",n.style.width=t,e.appendChild(n);const r=n.getBoundingClientRect().width;return e.removeChild(n),r}const St=4,Oo=8;function on(t){const{borderWidth:e,borderRadius:n,backgroundColor:r,paddingLeft:o,paddingRight:s,paddingTop:i,paddingBottom:l}=getComputedStyle(t),c=t.getBoundingClientRect(),h=Fe.getAlpha(Fe.parse(r))===0,u=Lt(e)>0,d=Lt(n),f=d?d+St:Oo;return h&&!u?{x:c.x+Lt(o)-St,y:c.y+Lt(i)-St,width:c.width-Lt(o)-Lt(s)+St*2,height:c.height-Lt(i)-Lt(l)+St*2,borderRadius:f}:{x:c.x-St,y:c.y-St,width:c.width+St*2,height:c.height+St*2,borderRadius:f}}const Ro=t=>{var n,r,o;const e=(o=(r=(n=st())==null?void 0:n.contentDocument)==null?void 0:r.defaultView)==null?void 0:o.HTMLElement;return t instanceof HTMLElement||!!e&&t instanceof e},Ao=t=>{const{sourceName:e,sourcePos:n}=t.dataset;if(!e||!n)return null;const[r,o]=n.split("-"),[s,i]=r.split(":"),[l,c]=o.split(":");return{id:`${e}:${s}:${i}`,name:e,element:t,location:{start:{line:Number(s),col:Number(i)},end:{line:Number(l),col:Number(c)}}}};function sn(t){const e=t.composedPath();for(const n of e){if(!Ro(n))continue;const r=Ao(n);if(r)return r}return null}class Co{constructor(){T(this,"window");T(this,"selectedComponent",null);T(this,"hoveredComponent",null);T(this,"frame",null);T(this,"getBoundingBoxes",()=>{let e=null,n=[];if(this.hoveredComponent){const{element:r}=this.hoveredComponent;e={component:{id:this.hoveredComponent.id,name:this.hoveredComponent.name,location:this.hoveredComponent.location},rect:on(r)}}if(this.selectedComponent){const{element:r}=this.selectedComponent;n=[{component:{id:this.selectedComponent.id,name:this.selectedComponent.name,location:this.selectedComponent.location},rect:on(r)}]}return{hovered:e,selected:n}});T(this,"measure",()=>{this.frame=requestAnimationFrame(()=>{var e,n;(n=(e=Y()).drawBoundingBoxes)==null||n.call(e,this.getBoundingBoxes())})});T(this,"handleMouseOver",e=>{const n=sn(e);this.hoveredComponent=n,this.measure()});T(this,"handlePointerDown",e=>{e.preventDefault(),e.stopPropagation()});T(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault();const n=sn(e);this.selectedComponent=n,this.measure()});T(this,"destroy",()=>{this.removeMouseListeners(),this.window.removeEventListener("scroll",this.measure,{capture:!0}),this.window.removeEventListener("resize",this.measure,{capture:!0}),this.frame!=null&&cancelAnimationFrame(this.frame)});T(this,"enable",()=>{this.removeMouseListeners(),this.window.addEventListener("mouseover",this.handleMouseOver,{passive:!0,capture:!0}),this.window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.addEventListener("click",this.handleClick,{capture:!0})});T(this,"disable",()=>{this.removeMouseListeners()});T(this,"removeMouseListeners",()=>{this.window.removeEventListener("mouseover",this.handleMouseOver,{capture:!0}),this.window.removeEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.removeEventListener("click",this.handleClick,{capture:!0})});var e;this.window=pr((e=st())==null?void 0:e.contentWindow),this.window.addEventListener("scroll",this.measure,{capture:!0}),this.window.addEventListener("resize",this.measure,{capture:!0})}}const Wt=({root:t=st(),additionalGlobals:e,sandboxLogger:n,isInit:r=!1})=>{var o,s,i;if(t!=null&&t.contentWindow){if(r){t.contentWindow.oai=e,t.contentWindow.openai=e,t.contentWindow.webplus=e;return}(o=t.contentWindow).oai??(o.oai={}),(s=t.contentWindow).openai??(s.openai={}),(i=t.contentWindow).webplus??(i.webplus={});for(const[l,c]of Object.entries(e))try{t.contentWindow.oai[l]=c,t.contentWindow.openai[l]=c,t.contentWindow.webplus[l]=c}catch(h){n.environmentError(h)}vo(t.contentWindow,e)}},vo=(t,e)=>{t.dispatchEvent(new ir(e)),t.dispatchEvent(new sr(e))},Lo=({widgetId:t,globals:e,sandboxLogger:n})=>{const{toolInput:r,toolOutput:o,toolResponseMetadata:s,widgetState:i,subjectId:l=null}=e;let c=i;return{toolInput:r,toolOutput:o,toolResponseMetadata:s,widgetState:i,subjectId:l,setWidgetState:h=>{var d,f;const u=typeof h=="function"?h(c):h;return c=u,Wt({additionalGlobals:{widgetState:u},sandboxLogger:n}),(f=(d=Y())==null?void 0:d.updateWidgetState)==null?void 0:f.call(d,t,u)}}},Io=({displayMode:t,viewParams:e})=>({displayMode:t,view:{params:e??null,mode:t}}),Wn=({doc:t=st(),safeArea:e})=>{var c;const n=(c=t==null?void 0:t.contentDocument)==null?void 0:c.documentElement;if(!n)return;const{insets:r}=e,{top:o,bottom:s,left:i,right:l}=r;n.style.setProperty("--safe-area-inset-top",`${o}px`),n.style.setProperty("--safe-area-inset-bottom",`${s}px`),n.style.setProperty("--safe-area-inset-left",`${i}px`),n.style.setProperty("--safe-area-inset-right",`${l}px`)},jn=({theme:t,doc:e=st()})=>{var r;const n=(r=e==null?void 0:e.contentDocument)==null?void 0:r.documentElement;n&&(n.dataset.theme=t,n.classList.remove("light","dark"),n.classList.add(t))},Po=(t,...e)=>{};class ot{constructor(){T(this,"pendingTimers",new Map)}log(e,...n){Po(e,...n)}error(e,n){console.error("[sandbox]",e,n),Y().sendInstrument({type:"error",message:e,error:n})}environmentError(e){if(console.error("[sandbox]",e),e instanceof Error){const{name:r,message:o,stack:s}=e;Y().notifyEnvironmentError({name:r,message:o,stack:s});return}const{stack:n}=new Error;try{Y().notifyEnvironmentError({name:"Unknown environment error",message:JSON.stringify(e),stack:n})}catch{Y().notifyEnvironmentError({name:"Unknown environment error",message:"Failed to stringify error",stack:n})}}count(e,n,r){Y().sendInstrument({type:"count",label:e,tags:r,count:n})}time(e){this.pendingTimers.has(e),this.pendingTimers.set(e,performance.now())}timeEnd(e){if(!this.pendingTimers.has(e))return;const n=performance.now(),r=n-(this.pendingTimers.get(e)??n);this.pendingTimers.delete(e),Y().sendInstrument({type:"hist",label:e,value:r})}}const Mo="/assets/python-worker-D0SAYB2Z.js",kn=new URL(Mo,import.meta.url);kn.searchParams.set("sessionId",lr);let Ot=null;const zo=()=>{const t=new Worker(kn.href,{type:"module"});return new Promise(e=>{t.onmessage=n=>{n.data.type==="ready"&&e(t)}})},Fo=async(t,e,n)=>{try{Ot??(Ot=await zo())}catch(r){e.error("failed to create python worker",r)}return new Promise((r,o)=>{const s=Ot;if(!s)return o(new Error("Python worker is unavailable"));let i=!1;const l=f=>{i||(i=!0,e.timeEnd("python.evaluation"),r(f))},c=f=>{i||(i=!0,e.timeEnd("python.evaluation"),o(f))},h=()=>{s.removeEventListener("terminate",d),s.onmessage===u&&(s.onmessage=null)},u=f=>{n(f.data),f.data.type===yt.RUN_COMPLETE&&(h(),l(f.data))},d=()=>{n({type:yt.RUN_COMPLETE,duration:null,wasCancelled:!0}),h(),l()};e.time("python.evaluation"),s.onmessage=u,s.addEventListener("terminate",d);try{s.postMessage({code:t})}catch(f){h(),c(f)}})},Un=()=>{try{Ot==null||Ot.dispatchEvent(new Event("terminate")),Ot==null||Ot.terminate()}finally{Ot=null}},ls=Object.freeze(Object.defineProperty({__proto__:null,runPythonInWorker:Fo,terminatePythonWorker:Un},Symbol.toStringTag,{value:"Module"}));function Do(t){const n=$e(t,new WeakMap);try{return structuredClone(n)}catch{}return n}function $e(t,e){if(t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t;if(typeof t=="symbol"||typeof t=="function"||typeof t>"u")return String(t);if(e.has(t))return e.get(t);try{return structuredClone(t)}catch{}const n=Object.prototype.toString.call(t);if(n==="[object Date]")return new Date(t.getTime());if(n==="[object RegExp]")return xo(t);if(n==="[object ArrayBuffer]")return t.slice(0);if(n==="[object DataView]"){const o=t,s=$e(o.buffer,e);try{return new DataView(s,o.byteOffset,o.byteLength)}catch{return String(t)}}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))try{const o=t.constructor;if(typeof t.slice=="function")return t.slice();const s=new o(t.length);return s.set(t),s}catch{return String(t)}if(n==="[object Map]"){const o=new Map;e.set(t,o);for(const[s,i]of t)o.set(Gt(s,e),Gt(i,e));return o}if(n==="[object Set]"){const o=new Set;e.set(t,o);for(const s of t)o.add(Gt(s,e));return o}if(typeof Blob<"u"&&t instanceof Blob)try{return typeof File<"u"&&t instanceof File?new File([t],t.name,{type:t.type,lastModified:t.lastModified}):new Blob([t],{type:t.type})}catch{return String(t)}if(typeof URL<"u"&&t instanceof URL)try{return new URL(t.toString())}catch{return String(t)}if(typeof URLSearchParams<"u"&&t instanceof URLSearchParams)try{return new URLSearchParams(t.toString())}catch{return String(t)}if(t instanceof Error){const o=t;let s;try{const i=o.constructor;s=typeof i=="function"?new i(o.message):new Error(o.message)}catch{s=new Error(o.message)}if(s.name=o.name,typeof o.stack=="string"&&(s.stack=o.stack),"cause"in o)try{s.cause=Gt(o.cause,e)}catch{s.cause=String(o.cause)}for(const i of Object.keys(o))try{s[i]=Gt(o[i],e)}catch{s[i]=String(o[i])}return s}if(typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof WeakMap<"u"&&t instanceof WeakMap||typeof WeakSet<"u"&&t instanceof WeakSet)return String(t);if(Array.isArray(t)){const o=new Array(t.length);e.set(t,o);for(let s=0;s<t.length;s++)s in t&&(o[s]=Gt(t[s],e));return o}const r={};e.set(t,r);for(const o of Object.keys(t)){let s;try{s=t[o]}catch(i){s=String(i)}r[o]=Gt(s,e)}return r}function Gt(t,e){try{return structuredClone(t)}catch{}return $e(t,e)}function xo(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}const an="ABORT",cn="CALL",ln="REJECT",Pe="RESOLVE";function bt(t,e){const n=s=>{const i=s.data;if(Array.isArray(i)&&i[0]===cn){s.stopImmediatePropagation();const[l]=s.ports;if(!l)throw new Error("RPCCallMessage must contains a port.");e?async function(){const c=new AbortController;try{l.onmessage=({data:h})=>Array.isArray(h)&&h[0]===an&&c.abort(),l.postMessage([Pe,await e.call({signal:c.signal},...i.slice(1))])}catch(h){if(h instanceof Error&&h.name==="DataCloneError")try{l.postMessage([Pe,await e.call({signal:c.signal},...Do(i.slice(1)))]);return}catch{}l.postMessage([ln,h])}finally{l.close()}}():(l.postMessage([ln,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),l.close())}};t.addEventListener("message",n),t.start();const r=s=>(...i)=>new Promise((l,c)=>{var d;const{port1:h,port2:u}=new MessageChannel;h.onmessage=f=>{const w=f.data;w[0]===Pe?l(w[1]):c(w[1]),h.close()},(d=s==null?void 0:s.signal)==null||d.addEventListener("abort",()=>{h.postMessage([an]),h.close(),c(new Error("Aborted."))}),t.postMessage([cn,...i],[u,...s.transfer||[]])}),o=r({});return o.withOptions=r,o}const un="GENERATOR_GENERATE";function hn(t,e){const n=s=>{const i=s.data;if(Array.isArray(i)&&i[0]===un){if(s.stopImmediatePropagation(),!e)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[l,c,...h]=i,u=e(...h);bt(c.next,u.next.bind(u)),bt(c.return,d=>{var f;return((f=u.return)==null?void 0:f.call(u,d))||{done:!0}}),bt(c.throw,d=>{var f;return((f=u.throw)==null?void 0:f.call(u,d))||Promise.reject(d)}),bt(c.asyncDispose,async()=>{var w,R;const d=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),f=Symbol.dispose||Symbol.for("Symbol.dispose");d in u?await((w=u[d])==null?void 0:w.call(u)):f in u&&((R=u[f])==null||R.call(u))})}};t.addEventListener("message",n),t.start();const r=s=>{let i;return(...l)=>{var Z;const{port1:c,port2:h}=new MessageChannel,{port1:u,port2:d}=new MessageChannel,{port1:f,port2:w}=new MessageChannel,{port1:R,port2:_}=new MessageChannel,O={signal:s.signal},b=()=>{c.close(),h.close(),u.close(),d.close(),f.close(),w.close(),R.close(),_.close()},L=bt(c).withOptions(O),p=bt(u).withOptions(O),y=bt(f).withOptions(O),I=bt(R).withOptions(O);let C=!1;const S=async J=>{if(i==null||i(),C)return{done:!0};const oe=await J();return oe.done&&(C=!0,b()),oe},P=async J=>{i==null||i(),await J(),C=!0,b(),i=()=>{throw new Error("This generator has been disposed.")}},B={next:J=>S(()=>p(J)),return:J=>S(()=>y(J)),throw:J=>S(()=>I(J)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>P(()=>L()),[Symbol.asyncIterator]:()=>B};return t.postMessage([un,{asyncDispose:h,next:d,return:w,throw:_},...l],[...s.transfer||[],h,d,w,_]),(Z=s.signal)==null||Z.addEventListener("abort",()=>{i=()=>{throw new Error("This generator has been aborted.")},b()},{once:!0}),B}},o=r({});return o.withOptions=r,o}const Bo=()=>ur?"*":Zt==="chatgpt"?"https://chatgpt.com":Zt==="chatgpt-tt"?"https://tt.chatgpt.com":Zt==="feather"?"https://feather.openai.com":Zt==="skybridge"?"https://skybridge.oaistatic.com":"*",No=async(t,e=[])=>{if("serviceWorker"in navigator){const i=await navigator.serviceWorker.getRegistration();if(i)return await i.unregister(),window.location.reload(),null}const n=Object.fromEntries(Object.entries(t).map(([i,l])=>{var u;const{port1:c,port2:h}=new MessageChannel;return l&&(((u=l==null?void 0:l.constructor)==null?void 0:u.name)==="AsyncGeneratorFunction"?hn(c,l):bt(c,l)),[i,h]})),r=new MessageChannel;window.parent.postMessage({type:"init",ports:n,replyPort:r.port2},Bo(),[...Object.values(n),r.port2]);const o=await new Promise(i=>{r.port1.onmessage=l=>i(l.data),r.port1.start()}),s=new Set(e);return Object.fromEntries(Object.entries(o).map(([i,l])=>[i,s.has(i)?hn(l):bt(l)]))},Go=/^rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\s*\)$/,Wo=t=>{const e=t.match(Go);return e?parseFloat(e[4])===0:!1},jo=t=>{const e=(t==null?void 0:t.getElementById("root"))??(t==null?void 0:t.documentElement);if(!e)return null;const r=(o=>{const s=[o];for(;s.length>0;){const i=s.shift();if(!i)return null;const{backgroundColor:l}=getComputedStyle(i);if(!Wo(l))return l;for(let c of i.children)s.push(c)}return null})(e);return r||null},ie=t=>{if(!t)return null;const e=t.scrollHeight??0,{height:n}=t.getBoundingClientRect(),r=Math.max(e,n);return Number.isFinite(r)&&r>0?r:null},Me=t=>{if(!t)return null;const e=t.scrollWidth??0,{width:n}=t.getBoundingClientRect(),r=Math.max(e,n);return Number.isFinite(r)&&r>0?r:null},ko=t=>{var o,s;const e=Array.from(t.children).filter(i=>{const l=i.tagName;return l!=="SCRIPT"&&l!=="STYLE"});if(!e.length)return null;if(e.length===1)return ie(e[0]);const n=(o=t.getBoundingClientRect)==null?void 0:o.call(t);let r=0;for(const i of e){const l=(s=i.getBoundingClientRect)==null?void 0:s.call(i);if(!l)continue;const c=n?n.top:0,h=l.bottom-c;r=Math.max(r,h)}return r>0?r:null},Uo=t=>{if(!t)return null;const e=ie(t.getElementById("root"));if(e)return e;const n=t.body;if(n){const r=ko(n);if(r)return r;const o=ie(n);if(o)return o}return ie(t.documentElement)??ie(t.scrollingElement)},Ho=t=>{if(!t)return null;const e=Me(t.getElementById("root"));return e||(Me(t.documentElement)??Me(t.scrollingElement))},Kt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Hn=new Set,De=typeof process=="object"&&process?process:{},$n=(t,e,n,r)=>{typeof De.emitWarning=="function"?De.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let Oe=globalThis.AbortController,dn=globalThis.AbortSignal;var yn;if(typeof Oe>"u"){dn=class{constructor(){T(this,"onabort");T(this,"_onabort",[]);T(this,"reason");T(this,"aborted",!1)}addEventListener(r,o){this._onabort.push(o)}},Oe=class{constructor(){T(this,"signal",new dn);e()}abort(r){var o,s;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const i of this.signal._onabort)i(r);(s=(o=this.signal).onabort)==null||s.call(o,r)}}};let t=((yn=De.env)==null?void 0:yn.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,$n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const $o=t=>!Hn.has(t),It=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Vn=t=>It(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?_e:null:null;class _e extends Array{constructor(e){super(e),this.fill(0)}}var Jt;const jt=class jt{constructor(e,n){T(this,"heap");T(this,"length");if(!a(jt,Jt))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=Vn(e);if(!n)return[];E(jt,Jt,!0);const r=new jt(e,n);return E(jt,Jt,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Jt=new WeakMap,v(jt,Jt,!1);let xe=jt;var mn,bn,ct,Q,lt,Ut,ut,Qt,te,k,ht,j,F,A,q,tt,X,H,dt,$,ft,pt,et,gt,Ft,K,ee,g,Ne,Ht,Rt,fe,nt,Xn,$t,ne,pe,Pt,Mt,Ge,Se,Te,z,We,ae,zt,je;const Ve=class Ve{constructor(e){v(this,g);v(this,ct);v(this,Q);v(this,lt);v(this,Ut);v(this,ut);v(this,Qt);v(this,te);T(this,"ttl");T(this,"ttlResolution");T(this,"ttlAutopurge");T(this,"updateAgeOnGet");T(this,"updateAgeOnHas");T(this,"allowStale");T(this,"noDisposeOnSet");T(this,"noUpdateTTL");T(this,"maxEntrySize");T(this,"sizeCalculation");T(this,"noDeleteOnFetchRejection");T(this,"noDeleteOnStaleGet");T(this,"allowStaleOnFetchAbort");T(this,"allowStaleOnFetchRejection");T(this,"ignoreFetchAbort");v(this,k);v(this,ht);v(this,j);v(this,F);v(this,A);v(this,q);v(this,tt);v(this,X);v(this,H);v(this,dt);v(this,$);v(this,ft);v(this,pt);v(this,et);v(this,gt);v(this,Ft);v(this,K);v(this,ee);v(this,Ht,()=>{});v(this,Rt,()=>{});v(this,fe,()=>{});v(this,nt,()=>!1);v(this,$t,e=>{});v(this,ne,(e,n,r)=>{});v(this,pe,(e,n,r,o)=>{if(r||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});T(this,mn,"LRUCache");const{max:n=0,ttl:r,ttlResolution:o=1,ttlAutopurge:s,updateAgeOnGet:i,updateAgeOnHas:l,allowStale:c,dispose:h,onInsert:u,disposeAfter:d,noDisposeOnSet:f,noUpdateTTL:w,maxSize:R=0,maxEntrySize:_=0,sizeCalculation:O,fetchMethod:b,memoMethod:L,noDeleteOnFetchRejection:p,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:C,ignoreFetchAbort:S}=e;if(n!==0&&!It(n))throw new TypeError("max option must be a nonnegative integer");const P=n?Vn(n):Array;if(!P)throw new Error("invalid max value: "+n);if(E(this,ct,n),E(this,Q,R),this.maxEntrySize=_||a(this,Q),this.sizeCalculation=O,this.sizeCalculation){if(!a(this,Q)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(L!==void 0&&typeof L!="function")throw new TypeError("memoMethod must be a function if defined");if(E(this,te,L),b!==void 0&&typeof b!="function")throw new TypeError("fetchMethod must be a function if specified");if(E(this,Qt,b),E(this,Ft,!!b),E(this,j,new Map),E(this,F,new Array(n).fill(void 0)),E(this,A,new Array(n).fill(void 0)),E(this,q,new P(n)),E(this,tt,new P(n)),E(this,X,0),E(this,H,0),E(this,dt,xe.create(n)),E(this,k,0),E(this,ht,0),typeof h=="function"&&E(this,lt,h),typeof u=="function"&&E(this,Ut,u),typeof d=="function"?(E(this,ut,d),E(this,$,[])):(E(this,ut,void 0),E(this,$,void 0)),E(this,gt,!!a(this,lt)),E(this,ee,!!a(this,Ut)),E(this,K,!!a(this,ut)),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!w,this.noDeleteOnFetchRejection=!!p,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!C,this.ignoreFetchAbort=!!S,this.maxEntrySize!==0){if(a(this,Q)!==0&&!It(a(this,Q)))throw new TypeError("maxSize must be a positive integer if specified");if(!It(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");m(this,g,Xn).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!i,this.updateAgeOnHas=!!l,this.ttlResolution=It(o)||o===0?o:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!It(this.ttl))throw new TypeError("ttl must be a positive integer if specified");m(this,g,Ne).call(this)}if(a(this,ct)===0&&this.ttl===0&&a(this,Q)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!a(this,ct)&&!a(this,Q)){const B="LRU_CACHE_UNBOUNDED";$o(B)&&(Hn.add(B),$n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",B,Ve))}}static unsafeExposeInternals(e){return{starts:a(e,pt),ttls:a(e,et),sizes:a(e,ft),keyMap:a(e,j),keyList:a(e,F),valList:a(e,A),next:a(e,q),prev:a(e,tt),get head(){return a(e,X)},get tail(){return a(e,H)},free:a(e,dt),isBackgroundFetch:n=>{var r;return m(r=e,g,z).call(r,n)},backgroundFetch:(n,r,o,s)=>{var i;return m(i=e,g,Te).call(i,n,r,o,s)},moveToTail:n=>{var r;return m(r=e,g,ae).call(r,n)},indexes:n=>{var r;return m(r=e,g,Pt).call(r,n)},rindexes:n=>{var r;return m(r=e,g,Mt).call(r,n)},isStale:n=>{var r;return a(r=e,nt).call(r,n)}}}get max(){return a(this,ct)}get maxSize(){return a(this,Q)}get calculatedSize(){return a(this,ht)}get size(){return a(this,k)}get fetchMethod(){return a(this,Qt)}get memoMethod(){return a(this,te)}get dispose(){return a(this,lt)}get onInsert(){return a(this,Ut)}get disposeAfter(){return a(this,ut)}getRemainingTTL(e){return a(this,j).has(e)?1/0:0}*entries(){for(const e of m(this,g,Pt).call(this))a(this,A)[e]!==void 0&&a(this,F)[e]!==void 0&&!m(this,g,z).call(this,a(this,A)[e])&&(yield[a(this,F)[e],a(this,A)[e]])}*rentries(){for(const e of m(this,g,Mt).call(this))a(this,A)[e]!==void 0&&a(this,F)[e]!==void 0&&!m(this,g,z).call(this,a(this,A)[e])&&(yield[a(this,F)[e],a(this,A)[e]])}*keys(){for(const e of m(this,g,Pt).call(this)){const n=a(this,F)[e];n!==void 0&&!m(this,g,z).call(this,a(this,A)[e])&&(yield n)}}*rkeys(){for(const e of m(this,g,Mt).call(this)){const n=a(this,F)[e];n!==void 0&&!m(this,g,z).call(this,a(this,A)[e])&&(yield n)}}*values(){for(const e of m(this,g,Pt).call(this))a(this,A)[e]!==void 0&&!m(this,g,z).call(this,a(this,A)[e])&&(yield a(this,A)[e])}*rvalues(){for(const e of m(this,g,Mt).call(this))a(this,A)[e]!==void 0&&!m(this,g,z).call(this,a(this,A)[e])&&(yield a(this,A)[e])}[(bn=Symbol.iterator,mn=Symbol.toStringTag,bn)](){return this.entries()}find(e,n={}){for(const r of m(this,g,Pt).call(this)){const o=a(this,A)[r],s=m(this,g,z).call(this,o)?o.__staleWhileFetching:o;if(s!==void 0&&e(s,a(this,F)[r],this))return this.get(a(this,F)[r],n)}}forEach(e,n=this){for(const r of m(this,g,Pt).call(this)){const o=a(this,A)[r],s=m(this,g,z).call(this,o)?o.__staleWhileFetching:o;s!==void 0&&e.call(n,s,a(this,F)[r],this)}}rforEach(e,n=this){for(const r of m(this,g,Mt).call(this)){const o=a(this,A)[r],s=m(this,g,z).call(this,o)?o.__staleWhileFetching:o;s!==void 0&&e.call(n,s,a(this,F)[r],this)}}purgeStale(){let e=!1;for(const n of m(this,g,Mt).call(this,{allowStale:!0}))a(this,nt).call(this,n)&&(m(this,g,zt).call(this,a(this,F)[n],"expire"),e=!0);return e}info(e){const n=a(this,j).get(e);if(n===void 0)return;const r=a(this,A)[n],o=m(this,g,z).call(this,r)?r.__staleWhileFetching:r;if(o===void 0)return;const s={value:o};if(a(this,et)&&a(this,pt)){const i=a(this,et)[n],l=a(this,pt)[n];if(i&&l){const c=i-(Kt.now()-l);s.ttl=c,s.start=Date.now()}}return a(this,ft)&&(s.size=a(this,ft)[n]),s}dump(){const e=[];for(const n of m(this,g,Pt).call(this,{allowStale:!0})){const r=a(this,F)[n],o=a(this,A)[n],s=m(this,g,z).call(this,o)?o.__staleWhileFetching:o;if(s===void 0||r===void 0)continue;const i={value:s};if(a(this,et)&&a(this,pt)){i.ttl=a(this,et)[n];const l=Kt.now()-a(this,pt)[n];i.start=Math.floor(Date.now()-l)}a(this,ft)&&(i.size=a(this,ft)[n]),e.unshift([r,i])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const o=Date.now()-r.start;r.start=Kt.now()-o}this.set(n,r.value,r)}}set(e,n,r={}){var f,w,R,_,O,b,L;if(n===void 0)return this.delete(e),this;const{ttl:o=this.ttl,start:s,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:c}=r;let{noUpdateTTL:h=this.noUpdateTTL}=r;const u=a(this,pe).call(this,e,n,r.size||0,l);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),m(this,g,zt).call(this,e,"set"),this;let d=a(this,k)===0?void 0:a(this,j).get(e);if(d===void 0)d=a(this,k)===0?a(this,H):a(this,dt).length!==0?a(this,dt).pop():a(this,k)===a(this,ct)?m(this,g,Se).call(this,!1):a(this,k),a(this,F)[d]=e,a(this,A)[d]=n,a(this,j).set(e,d),a(this,q)[a(this,H)]=d,a(this,tt)[d]=a(this,H),E(this,H,d),we(this,k)._++,a(this,ne).call(this,d,u,c),c&&(c.set="add"),h=!1,a(this,ee)&&((f=a(this,Ut))==null||f.call(this,n,e,"add"));else{m(this,g,ae).call(this,d);const p=a(this,A)[d];if(n!==p){if(a(this,Ft)&&m(this,g,z).call(this,p)){p.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=p;y!==void 0&&!i&&(a(this,gt)&&((w=a(this,lt))==null||w.call(this,y,e,"set")),a(this,K)&&((R=a(this,$))==null||R.push([y,e,"set"])))}else i||(a(this,gt)&&((_=a(this,lt))==null||_.call(this,p,e,"set")),a(this,K)&&((O=a(this,$))==null||O.push([p,e,"set"])));if(a(this,$t).call(this,d),a(this,ne).call(this,d,u,c),a(this,A)[d]=n,c){c.set="replace";const y=p&&m(this,g,z).call(this,p)?p.__staleWhileFetching:p;y!==void 0&&(c.oldValue=y)}}else c&&(c.set="update");a(this,ee)&&((b=this.onInsert)==null||b.call(this,n,e,n===p?"update":"replace"))}if(o!==0&&!a(this,et)&&m(this,g,Ne).call(this),a(this,et)&&(h||a(this,fe).call(this,d,o,s),c&&a(this,Rt).call(this,c,d)),!i&&a(this,K)&&a(this,$)){const p=a(this,$);let y;for(;y=p==null?void 0:p.shift();)(L=a(this,ut))==null||L.call(this,...y)}return this}pop(){var e;try{for(;a(this,k);){const n=a(this,A)[a(this,X)];if(m(this,g,Se).call(this,!0),m(this,g,z).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(a(this,K)&&a(this,$)){const n=a(this,$);let r;for(;r=n==null?void 0:n.shift();)(e=a(this,ut))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:o}=n,s=a(this,j).get(e);if(s!==void 0){const i=a(this,A)[s];if(m(this,g,z).call(this,i)&&i.__staleWhileFetching===void 0)return!1;if(a(this,nt).call(this,s))o&&(o.has="stale",a(this,Rt).call(this,o,s));else return r&&a(this,Ht).call(this,s),o&&(o.has="hit",a(this,Rt).call(this,o,s)),!0}else o&&(o.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,o=a(this,j).get(e);if(o===void 0||!r&&a(this,nt).call(this,o))return;const s=a(this,A)[o];return m(this,g,z).call(this,s)?s.__staleWhileFetching:s}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:c=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:w=this.ignoreFetchAbort,allowStaleOnFetchAbort:R=this.allowStaleOnFetchAbort,context:_,forceRefresh:O=!1,status:b,signal:L}=n;if(!a(this,Ft))return b&&(b.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:o,noDeleteOnStaleGet:s,status:b});const p={allowStale:r,updateAgeOnGet:o,noDeleteOnStaleGet:s,ttl:i,noDisposeOnSet:l,size:c,sizeCalculation:h,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:R,ignoreFetchAbort:w,status:b,signal:L};let y=a(this,j).get(e);if(y===void 0){b&&(b.fetch="miss");const I=m(this,g,Te).call(this,e,y,p,_);return I.__returned=I}else{const I=a(this,A)[y];if(m(this,g,z).call(this,I)){const Z=r&&I.__staleWhileFetching!==void 0;return b&&(b.fetch="inflight",Z&&(b.returnedStale=!0)),Z?I.__staleWhileFetching:I.__returned=I}const C=a(this,nt).call(this,y);if(!O&&!C)return b&&(b.fetch="hit"),m(this,g,ae).call(this,y),o&&a(this,Ht).call(this,y),b&&a(this,Rt).call(this,b,y),I;const S=m(this,g,Te).call(this,e,y,p,_),B=S.__staleWhileFetching!==void 0&&r;return b&&(b.fetch=C?"stale":"refresh",B&&C&&(b.returnedStale=!0)),B?S.__staleWhileFetching:S.__returned=S}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=a(this,te);if(!r)throw new Error("no memoMethod provided to constructor");const{context:o,forceRefresh:s,...i}=n,l=this.get(e,i);if(!s&&l!==void 0)return l;const c=r(e,l,{options:i,context:o});return this.set(e,c,i),c}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:i}=n,l=a(this,j).get(e);if(l!==void 0){const c=a(this,A)[l],h=m(this,g,z).call(this,c);return i&&a(this,Rt).call(this,i,l),a(this,nt).call(this,l)?(i&&(i.get="stale"),h?(i&&r&&c.__staleWhileFetching!==void 0&&(i.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||m(this,g,zt).call(this,e,"expire"),i&&r&&(i.returnedStale=!0),r?c:void 0)):(i&&(i.get="hit"),h?c.__staleWhileFetching:(m(this,g,ae).call(this,l),o&&a(this,Ht).call(this,l),c))}else i&&(i.get="miss")}delete(e){return m(this,g,zt).call(this,e,"delete")}clear(){return m(this,g,je).call(this,"delete")}};ct=new WeakMap,Q=new WeakMap,lt=new WeakMap,Ut=new WeakMap,ut=new WeakMap,Qt=new WeakMap,te=new WeakMap,k=new WeakMap,ht=new WeakMap,j=new WeakMap,F=new WeakMap,A=new WeakMap,q=new WeakMap,tt=new WeakMap,X=new WeakMap,H=new WeakMap,dt=new WeakMap,$=new WeakMap,ft=new WeakMap,pt=new WeakMap,et=new WeakMap,gt=new WeakMap,Ft=new WeakMap,K=new WeakMap,ee=new WeakMap,g=new WeakSet,Ne=function(){const e=new _e(a(this,ct)),n=new _e(a(this,ct));E(this,et,e),E(this,pt,n),E(this,fe,(s,i,l=Kt.now())=>{if(n[s]=i!==0?l:0,e[s]=i,i!==0&&this.ttlAutopurge){const c=setTimeout(()=>{a(this,nt).call(this,s)&&m(this,g,zt).call(this,a(this,F)[s],"expire")},i+1);c.unref&&c.unref()}}),E(this,Ht,s=>{n[s]=e[s]!==0?Kt.now():0}),E(this,Rt,(s,i)=>{if(e[i]){const l=e[i],c=n[i];if(!l||!c)return;s.ttl=l,s.start=c,s.now=r||o();const h=s.now-c;s.remainingTTL=l-h}});let r=0;const o=()=>{const s=Kt.now();if(this.ttlResolution>0){r=s;const i=setTimeout(()=>r=0,this.ttlResolution);i.unref&&i.unref()}return s};this.getRemainingTTL=s=>{const i=a(this,j).get(s);if(i===void 0)return 0;const l=e[i],c=n[i];if(!l||!c)return 1/0;const h=(r||o())-c;return l-h},E(this,nt,s=>{const i=n[s],l=e[s];return!!l&&!!i&&(r||o())-i>l})},Ht=new WeakMap,Rt=new WeakMap,fe=new WeakMap,nt=new WeakMap,Xn=function(){const e=new _e(a(this,ct));E(this,ht,0),E(this,ft,e),E(this,$t,n=>{E(this,ht,a(this,ht)-e[n]),e[n]=0}),E(this,pe,(n,r,o,s)=>{if(m(this,g,z).call(this,r))return 0;if(!It(o))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(o=s(r,n),!It(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return o}),E(this,ne,(n,r,o)=>{if(e[n]=r,a(this,Q)){const s=a(this,Q)-e[n];for(;a(this,ht)>s;)m(this,g,Se).call(this,!0)}E(this,ht,a(this,ht)+e[n]),o&&(o.entrySize=r,o.totalCalculatedSize=a(this,ht))})},$t=new WeakMap,ne=new WeakMap,pe=new WeakMap,Pt=function*({allowStale:e=this.allowStale}={}){if(a(this,k))for(let n=a(this,H);!(!m(this,g,Ge).call(this,n)||((e||!a(this,nt).call(this,n))&&(yield n),n===a(this,X)));)n=a(this,tt)[n]},Mt=function*({allowStale:e=this.allowStale}={}){if(a(this,k))for(let n=a(this,X);!(!m(this,g,Ge).call(this,n)||((e||!a(this,nt).call(this,n))&&(yield n),n===a(this,H)));)n=a(this,q)[n]},Ge=function(e){return e!==void 0&&a(this,j).get(a(this,F)[e])===e},Se=function(e){var s,i;const n=a(this,X),r=a(this,F)[n],o=a(this,A)[n];return a(this,Ft)&&m(this,g,z).call(this,o)?o.__abortController.abort(new Error("evicted")):(a(this,gt)||a(this,K))&&(a(this,gt)&&((s=a(this,lt))==null||s.call(this,o,r,"evict")),a(this,K)&&((i=a(this,$))==null||i.push([o,r,"evict"]))),a(this,$t).call(this,n),e&&(a(this,F)[n]=void 0,a(this,A)[n]=void 0,a(this,dt).push(n)),a(this,k)===1?(E(this,X,E(this,H,0)),a(this,dt).length=0):E(this,X,a(this,q)[n]),a(this,j).delete(r),we(this,k)._--,n},Te=function(e,n,r,o){const s=n===void 0?void 0:a(this,A)[n];if(m(this,g,z).call(this,s))return s;const i=new Oe,{signal:l}=r;l==null||l.addEventListener("abort",()=>i.abort(l.reason),{signal:i.signal});const c={signal:i.signal,options:r,context:o},h=(_,O=!1)=>{const{aborted:b}=i.signal,L=r.ignoreFetchAbort&&_!==void 0;if(r.status&&(b&&!O?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,L&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),b&&!L&&!O)return d(i.signal.reason);const p=w;return a(this,A)[n]===w&&(_===void 0?p.__staleWhileFetching?a(this,A)[n]=p.__staleWhileFetching:m(this,g,zt).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,_,c.options))),_},u=_=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=_),d(_)),d=_=>{const{aborted:O}=i.signal,b=O&&r.allowStaleOnFetchAbort,L=b||r.allowStaleOnFetchRejection,p=L||r.noDeleteOnFetchRejection,y=w;if(a(this,A)[n]===w&&(!p||y.__staleWhileFetching===void 0?m(this,g,zt).call(this,e,"fetch"):b||(a(this,A)[n]=y.__staleWhileFetching)),L)return r.status&&y.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),y.__staleWhileFetching;if(y.__returned===y)throw _},f=(_,O)=>{var L;const b=(L=a(this,Qt))==null?void 0:L.call(this,e,s,c);b&&b instanceof Promise&&b.then(p=>_(p===void 0?void 0:p),O),i.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(_(void 0),r.allowStaleOnFetchAbort&&(_=p=>h(p,!0)))})};r.status&&(r.status.fetchDispatched=!0);const w=new Promise(f).then(h,u),R=Object.assign(w,{__abortController:i,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,R,{...c.options,status:void 0}),n=a(this,j).get(e)):a(this,A)[n]=R,R},z=function(e){if(!a(this,Ft))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Oe},We=function(e,n){a(this,tt)[n]=e,a(this,q)[e]=n},ae=function(e){e!==a(this,H)&&(e===a(this,X)?E(this,X,a(this,q)[e]):m(this,g,We).call(this,a(this,tt)[e],a(this,q)[e]),m(this,g,We).call(this,a(this,H),e),E(this,H,e))},zt=function(e,n){var o,s,i,l;let r=!1;if(a(this,k)!==0){const c=a(this,j).get(e);if(c!==void 0)if(r=!0,a(this,k)===1)m(this,g,je).call(this,n);else{a(this,$t).call(this,c);const h=a(this,A)[c];if(m(this,g,z).call(this,h)?h.__abortController.abort(new Error("deleted")):(a(this,gt)||a(this,K))&&(a(this,gt)&&((o=a(this,lt))==null||o.call(this,h,e,n)),a(this,K)&&((s=a(this,$))==null||s.push([h,e,n]))),a(this,j).delete(e),a(this,F)[c]=void 0,a(this,A)[c]=void 0,c===a(this,H))E(this,H,a(this,tt)[c]);else if(c===a(this,X))E(this,X,a(this,q)[c]);else{const u=a(this,tt)[c];a(this,q)[u]=a(this,q)[c];const d=a(this,q)[c];a(this,tt)[d]=a(this,tt)[c]}we(this,k)._--,a(this,dt).push(c)}}if(a(this,K)&&((i=a(this,$))!=null&&i.length)){const c=a(this,$);let h;for(;h=c==null?void 0:c.shift();)(l=a(this,ut))==null||l.call(this,...h)}return r},je=function(e){var n,r,o;for(const s of m(this,g,Mt).call(this,{allowStale:!0})){const i=a(this,A)[s];if(m(this,g,z).call(this,i))i.__abortController.abort(new Error("deleted"));else{const l=a(this,F)[s];a(this,gt)&&((n=a(this,lt))==null||n.call(this,i,l,e)),a(this,K)&&((r=a(this,$))==null||r.push([i,l,e]))}}if(a(this,j).clear(),a(this,A).fill(void 0),a(this,F).fill(void 0),a(this,et)&&a(this,pt)&&(a(this,et).fill(0),a(this,pt).fill(0)),a(this,ft)&&a(this,ft).fill(0),E(this,X,0),E(this,H,0),a(this,dt).length=0,E(this,ht,0),E(this,k,0),a(this,K)&&a(this,$)){const s=a(this,$);let i;for(;i=s==null?void 0:s.shift();)(o=a(this,ut))==null||o.call(this,...i)}};let Be=Ve;const fn=new Be({max:100,ttl:60*5e3}),Vo=["sediment://","file-service://"],Xo="/blank.svg",Yo=({doc:t})=>{const e=t.contentWindow;if(!e)return;const n=Object.getOwnPropertyDescriptor(e.HTMLImageElement.prototype,"src");n&&Object.defineProperty(e.HTMLImageElement.prototype,"src",{set(r){var o,s,i,l,c;if(typeof r=="string"&&Vo.some(h=>r.startsWith(h))){const h=fn.get(r);if(h){(o=n.set)==null||o.call(this,h);return}(s=n.set)==null||s.call(this,Xo),(l=(i=Y()).getDownloadURL)==null||l.call(i,r).then(u=>{var d;fn.set(r,u),(d=n.set)==null||d.call(this,u)}).catch(()=>{var u;(u=n.set)==null||u.call(this,"")})}else(c=n.set)==null||c.call(this,r)},get:n.get,configurable:!0,enumerable:!0})},qo=({doc:t})=>{const e=t.contentWindow;!e||!("console"in e)||e.addEventListener("pointerdown",n=>{for(const r of n.composedPath())r instanceof e.HTMLElement&&r.dataset.instrument&&Y().sendInstrument({type:"count",label:`clicked.${r.dataset.instrument}`})},{passive:!0,capture:!0})},pn=t=>{const e=t.trim().match(/(\d+):(\d+)\)?$/),n=parseInt((e==null?void 0:e.at(1))??""),r=parseInt((e==null?void 0:e.at(2))??"");return{lineno:n,colno:r}},gn=(t,e)=>{var o;const n=[],r=t.split(`
`).slice(1)??[];for(let s=0;s<r.length;s++){const i=r[s],l=e(i);if(!l)break;const{source:c,line:h,column:u}=l;if(!(h==null||u==null))if(c!=null&&c.startsWith("internal")){const d=(o=e(r[s+1]))==null?void 0:o.name;d?n.push({line:h,column:u,formatted:`	at ${d} (module:${h}:${u})`}):n.push({line:h,column:u,formatted:i.replace(/(\(blob:.*\))$/,`(module:${h}:${u})`)})}else break}return n},Ko=({doc:t,sandboxLogger:e,onMessage:n,transformPosition:r})=>{const o=t.contentWindow;if(!o||!("console"in o))return;const s=c=>{if(!c)return null;const{lineno:h,colno:u}=pn(c);return(r==null?void 0:r({line:h,column:u}))??null};o.addEventListener("unhandledrejection",({reason:c})=>{var h,u;if(typeof c=="object"&&"stack"in c){const d=gn(c.stack,s);n({type:yt.ERROR,line:((h=d[0])==null?void 0:h.line)??null,error:{line:((u=d[0])==null?void 0:u.line)??null,message:String(c.message??""),name:c.name??"Error",stack:d.map(({formatted:f})=>f)}})}}),o.addEventListener("error",({lineno:c,colno:h,error:u,message:d})=>{var _;const f=((_=r==null?void 0:r({line:c,column:h}))==null?void 0:_.line)??null;let w="",R=[];u&&typeof u=="object"&&"name"in u&&"stack"in u&&(w=u.name,R=gn(u.stack,s).map(({formatted:O})=>O)),(w||d)&&n({type:yt.ERROR,error:{line:f,message:d,name:w||"Error",stack:R},line:f})},{passive:!0,capture:!0});const i=o.console,l=(c,h)=>(u,...d)=>{var R,_;c(u,...d);let f;if(u&&typeof u=="object"&&"stack"in u&&typeof u.stack=="string"){const O=(R=u.stack)==null?void 0:R.split(`
`);f=(O==null?void 0:O[1])??(O==null?void 0:O[0])}else{const L=(new Error().stack??"").split(`
`);f=L[2]||L[1]}let w=null;if(f){const{lineno:O,colno:b}=pn(f);w=((_=r==null?void 0:r({line:O,column:b}))==null?void 0:_.line)??null}try{h({line:w,error:u instanceof Error?u:null,args:u instanceof Error?d:[u,...d]})}catch(O){e.error("Failed to log",O)}};i.error=l(i.error,({line:c,args:h,error:u})=>{n({type:yt.ERROR,line:c,error:u?{line:c,message:u.message,name:u.name,stack:[]}:{line:c,message:String(h[0]??""),name:"Error",stack:[]}}),h.length&&n({type:yt.LOG,level:"info",line:c,log:h})}),i.log=l(i.log,({line:c,args:h})=>{n({type:yt.LOG,level:"info",line:c,log:h})})},Zo=({doc:t})=>{t.contentWindow&&t.contentWindow.addEventListener("securitypolicyviolation",e=>{const n={effectiveDirective:e.effectiveDirective,violatedDirective:e.violatedDirective,blockedURI:e.blockedURI,sourceFile:e.sourceFile};Y().notifySecurityPolicyViolation(n)})};function Jo(t){let e=!1;const n=[],r=[];function o(c){n.length>0?n.shift()(c):r.push(c)}function s(c){e||o({value:c,done:!1})}function i(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(o(Promise.reject(c)),i())}try{t(s,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{r.length>0?c(r.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}const Qo=t=>t?t<0?"pop":"push":"update",Yn=({doc:t})=>{const e=t.contentWindow;if(!e)return;const{history:n}=e;let r=[],o=[],s=-1,i=0,l=null;const c=()=>e.location.hash??"",h=S=>{if(!S)return"";try{return new URL(S,e.location.href).hash??""}catch{return""}},u=()=>(i+=1,i),d=()=>{if(r.length===0){r=[u()],o=[c()],s=0;return}o.length===0&&(o=[c()])},f=S=>{var P,B;!r.length||s<0||(B=(P=Y()).notifyNavigation)==null||B.call(P,{type:S,canGoBack:s>0,canGoForward:s<r.length-1})},w=(S,P=c())=>{d(),s<r.length-1&&(r=r.slice(0,s+1),o=o.slice(0,s+1)),r=[...r,u()],o=[...o,P],s=r.length-1,l=null,f(S)},R=(S=c())=>{d(),s>=0&&(r[s]=u(),o[s]=S),l=null,f("replace")},_=S=>{if(d(),!r.length)return;const P=typeof S=="number"&&Number.isFinite(S)?Math.trunc(S):0;P!==0&&(s=Math.min(r.length-1,Math.max(0,s+P))),l=null,f(Qo(P))},O=()=>{_(l??-1)},b=S=>{const P=c();if(l!=null){_(l);return}d();const B=h(S==null?void 0:S.oldURL),Z=o.lastIndexOf(P);if(Z!==-1&&Z!==s){_(Z-s);return}if(Z===s){f("update");return}if(B&&o[s]===B){R(P);return}w("push",P)},L=n.pushState.bind(n);n.pushState=function(...S){const P=L(...S);return w("push"),P};const p=n.replaceState.bind(n);n.replaceState=function(...S){const P=p(...S);return R(),P};const y=n.back.bind(n);n.back=function(...S){return l=-1,y(...S)};const I=n.forward.bind(n);n.forward=function(...S){return l=1,I(...S)};const C=n.go.bind(n);n.go=function(...S){const[P=0]=S,B=typeof P=="number"&&Number.isFinite(P)?Math.trunc(P):Number.parseInt(String(P),10);return l=Number.isFinite(B)?B:null,C(...S)},n.popToRoot=function(){d();const S=-s;if(S===0){l=null;return}return l=S,C(S)},e.addEventListener("popstate",O),e.addEventListener("hashchange",b),d(),f("replace")},ts={go:t=>{var e,n;(n=(e=st())==null?void 0:e.contentWindow)==null||n.history.go(t)},popToRoot:()=>{var t,e,n,r;(r=(n=(e=(t=st())==null?void 0:t.contentWindow)==null?void 0:e.history).popToRoot)==null||r.call(n)}},es=Object.freeze(Object.defineProperty({__proto__:null,navigation:ts,useNavigation:Yn},Symbol.toStringTag,{value:"Module"})),ns="html,body,#root{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;padding:0}html,body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Helvetica Neue,Arial,sans-serif!important}button,input,textarea,select{font-family:inherit}html{background-color:#fff}html.dark{background-color:#212121}html.mobileSkybridge.dark{background-color:#000}@supports (font: -apple-system-body){html.mobileSkybridge{font:-apple-system-body}}html.desktopSkybridge.dark{background-color:#1e1e1e}",rs=t=>{try{const e=t.createElement("style");e.textContent=ns.trim(),t.head.appendChild(e),ke?t.documentElement.classList.add(Tn):Sn&&t.documentElement.classList.add(On)}catch{}};async function*qn({sandboxLogger:t,features:e,html:n,theme:r,safeArea:o,transformPosition:s,additionalGlobals:i,expectReadySignal:l,isFirstParty:c=!1,measureWidth:h=!1,measureHeight:u=!1,disableMutationObserver:d=!1,onIframeReady:f}){let w=null,R=null;yield*Jo((_,O)=>{let b=null;const L=C=>{_(C),C.type===yt.RUN_COMPLETE&&(b==null||b(),O())};t.time("html.evaluation");const p=st(),y=nr(e),I=()=>{if(!y.contentDocument||!y.contentWindow)return;const C=y.contentDocument,S=y.contentWindow;if(f)try{const N=f({root:y,viewWindow:S,document:C});b=typeof N=="function"?N:null}catch(N){t.error("Failed to run iframe-ready callback",N)}(i||o)&&Wt({root:y,additionalGlobals:Object.assign(i??{},{safeArea:o}),sandboxLogger:t,isInit:!0}),C.open(),cr({doc:y,isFirstParty:c}),Yn({doc:y}),Zo({doc:y}),qo({doc:y}),Ko({doc:y,sandboxLogger:t,transformPosition:s,onMessage:L}),Yo({doc:y});let P=null,B=null,Z=null;const J=()=>{p==null||p.remove(),t.timeEnd("html.evaluation"),L({type:yt.ENVIRONMENT_STATUS,status:En.RUNNING_CODE})},oe=()=>{w==null||w.disconnect(),R==null||R.disconnect(),L({type:yt.RUN_COMPLETE,duration:null,wasCancelled:!1,wasFatalError:!0})},Xe=()=>{var V,at;if(!u)return;const N=Uo(C);N&&N!==B&&((at=(V=Y()).notifyIntrinsicHeight)==null||at.call(V,N),B=N)},Ye=()=>{var V,at;if(!h)return;const N=Ho(C);N&&N!==Z&&((at=(V=Y()).notifyIntrinsicWidth)==null||at.call(V,N),Z=N)},Kn=()=>{var V,at;const N=jo(C);N!=null&&N!==P&&((at=(V=Y()).notifyBackgroundColor)==null||at.call(V,N),P=N)};C.write(n);const Nt=C.documentElement;rs(C),R=new ResizeObserver(()=>{Xe(),Ye()}),w=new MutationObserver(N=>{for(const V of N)if(V.target===Nt){if(V.attributeName==="data-ready"&&Nt.hasAttribute("data-ready")){J();break}else if(V.attributeName==="data-fatal"&&Nt.hasAttribute("data-fatal")){oe();break}}else if(V.addedNodes.length===0&&V.removedNodes.length>0&&V.target.parentElement===C.body&&V.target.childNodes.length===0&&Array.from(C.body.childNodes).every(at=>at===V.target||os(at))){oe();break}Kn(),Xe(),Ye()}),en&&(Nt.lang=en),r&&jn({theme:r,doc:y}),o&&Wn({doc:y,safeArea:o}),R.observe(Nt,{box:"border-box"}),d||w.observe(Nt,{childList:!0,attributes:!0,subtree:!0}),C.close(),l||J(),Nt.hasAttribute("data-ready")&&J()};y.addEventListener("load",I,{once:!0}),y.src="about:blank"})}function os(t){var e;return t.nodeType===Node.COMMENT_NODE?!0:t.nodeType===Node.TEXT_NODE?!((e=t.textContent)!=null&&e.trim()):t.nodeType===Node.ELEMENT_NODE?t.childNodes.length===0:!0}const ds=Object.freeze(Object.defineProperty({__proto__:null,runHTMLAsync:qn},Symbol.toStringTag,{value:"Module"}));async function*ss(t,{html:e,props:n,theme:r,userAgent:o,features:s,safeArea:i}){let l;try{l=Ue({isFirstParty:!0,includePrivate:!1}),l.theme=r,l.userAgent=o,Object.assign(l,n)}catch{}yield*qn({sandboxLogger:t,html:e,theme:r,features:s,additionalGlobals:l,safeArea:i,transformPosition:null,expectReadySignal:!1,isFirstParty:!0,measureHeight:!0,measureWidth:!1})}const se=(()=>{let t=null;return()=>(t??(t=Tt(()=>import("./adapter-BXANqUJ5.js"),[])),t)})();let mt=null;No({async*runUserCode(t){const e=new ot;try{const{runUserCode:n}=await Tt(async()=>{const{runUserCode:r}=await import("./run-user-code-D6ecMoD5.js");return{runUserCode:r}},__vite__mapDeps([0,1]));yield*n(e,t)}catch(n){e.environmentError(n)}},async buildUserCode(t){const e=new ot;try{const{buildUserCode:n}=await Tt(async()=>{const{buildUserCode:r}=await import("./build-user-code-BluAApu-.js");return{buildUserCode:r}},__vite__mapDeps([2,3]));return await n(e,t)}catch(n){e.environmentError(n)}return null},async prepareEnvironment(t){const e=new ot;try{const{prepareEnvironment:n}=await Tt(async()=>{const{prepareEnvironment:r}=await import("./prepare-environment-DnATw1bv.js");return{prepareEnvironment:r}},[]);await n(e,t)}catch(n){e.environmentError(n)}},async*runWidgetCode(t){const e=new ot;try{const{runWidgetCode:n}=await Tt(async()=>{const{runWidgetCode:r}=await import("./run-widget-code-Mj8mQyDh.js");return{runWidgetCode:r}},__vite__mapDeps([4,1,5]));yield*n(e,t)}catch(n){e.environmentError(n)}},async*runComponent(t){const e=new ot;try{yield*ss(e,t)}catch(n){e.environmentError(n)}},async validate(t,e){const n=new ot;try{const{validateReact:r}=await Tt(async()=>{const{validateReact:o}=await import("./validate-react-OtPi28EF.js");return{validateReact:o}},__vite__mapDeps([6,3,7]));return await r(n,t,e),!0}catch(r){const{parseAndLogTranspileError:o}=await Tt(async()=>{const{parseAndLogTranspileError:s}=await import("./parse-transpile-error-BBjGX3mP.js");return{parseAndLogTranspileError:s}},__vite__mapDeps([8,7]));return o(n,r)??!1}},stop(){Un(),mt==null||mt.destroy(),mt=null,er()},setEditMode:t=>{const e=new ot;try{mt??(mt=new Co)}catch(n){e.environmentError(n);return}t?mt.enable():(mt==null||mt.destroy(),mt=null)},async screenshot(){var i;const t=st();if(!t)return null;const e=(i=t.contentDocument)==null?void 0:i.documentElement;if(!e)return null;const n=e.scrollLeft||0,r=e.scrollTop||0,{domToDataUrl:o}=await Tt(async()=>{const{domToDataUrl:l}=await import("./index-hL9okClV.js");return{domToDataUrl:l}},[]);return{imageBase64:await o(e,{backgroundColor:"transparent"}),scrollX:n,scrollY:r}},async setAdditionalGlobals({additionalGlobals:t}){const e=new ot;try{Wt({additionalGlobals:t,sandboxLogger:e})}catch(n){e.environmentError(n)}},async setWidgetData({widgetId:t,widgetState:e,toolInput:n,toolOutput:r,toolResponseMetadata:o,subjectId:s=null}){const i=new ot;try{Wt({additionalGlobals:{widget:{state:e,props:r,setState:l=>{var c,h;return(h=(c=Y())==null?void 0:c.updateWidgetState)==null?void 0:h.call(c,t,l)}},...Lo({widgetId:t,globals:{toolInput:n,toolOutput:r,toolResponseMetadata:o,widgetState:e,subjectId:s},sandboxLogger:i})},sandboxLogger:i})}catch(l){i.environmentError(l)}},async setWidgetView({displayMode:t,viewParams:e}){const n=new ot;try{Wt({additionalGlobals:Io({displayMode:t,viewParams:e}),sandboxLogger:n})}catch(r){n.environmentError(r)}},async setTheme({theme:t}){const e=new ot;try{jn({theme:t}),Wt({additionalGlobals:{theme:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async setSafeArea({safeArea:t}){const e=new ot;try{Wn({safeArea:t}),Wt({additionalGlobals:{safeArea:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},notifyMcpAppsToolInput(t){se().then(({notifyMcpAppsToolInput:e})=>{e(t)})},notifyMcpAppsToolResult(t){se().then(({notifyMcpAppsToolResult:e})=>{e(t)})},notifyMcpAppsToolCancelled(t){se().then(({notifyMcpAppsToolCancelled:e})=>{e(t)})},notifyMcpAppsHostContext({hostContext:t}){se().then(({notifyMcpAppsHostContext:e})=>{e(t)})},async requestMcpAppsResourceTeardown({timeoutMs:t}={}){const{requestMcpAppsResourceTeardown:e}=await se();await e(t)},async navigate(t){const{navigation:e}=await Tt(async()=>{const{navigation:n}=await Promise.resolve().then(()=>es);return{navigation:n}},void 0);if("delta"in t){e.go(t.delta);return}if("popToRoot"in t){e.popToRoot();return}},getCurrentPath(){var e,n;const t=(n=(e=st())==null?void 0:e.contentWindow)==null?void 0:n.location;return t?`${t.pathname}${t.search}${t.hash}`:null}},["streamCompletion"]).then(t=>{t&&dr(t)});export{En as E,en as L,yt as M,Tt as _,Y as a,Lo as b,Jo as c,Io as d,M as e,cs as f,Ue as g,Be as h,ls as i,ds as j,as as n,qn as r};
